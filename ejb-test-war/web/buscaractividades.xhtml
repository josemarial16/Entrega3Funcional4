<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
		xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition template="templates/layout.xhtml" >
	<ui:define name="title">Buscar actividades</ui:define>
	<ui:define name="content">
<c:choose>
<c:when test="#{controlAutorizacion.usuario.tipo_usuario!=NULL}">
	<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <!-- Slide One - Set the background image for this slide in the line below -->
        <div class="carousel-item active" style="background-image: url('resources/fotos/edit3.jpg')">
         
        </div>
        <!-- Slide Two - Set the background image for this slide in the line below -->
        <div class="carousel-item" style="background-image: url('resources/fotos/beneficios-voluntariado.jpg')">
          
        </div>
        <!-- Slide Three - Set the background image for this slide in the line below -->
        <div class="carousel-item" style="background-image: url('resources/fotos/sonrisas.jpeg')">
          
        </div>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
     <div class="container">
	<div align="center">
    	<h1 class="my-4">Buscar Actividades
    	</h1>
    </div>

    <!-- Marketing Icons Section -->
    <div class="row">
    <div class="card h-100">
     <div class="card-body" align="center">
     <h:form>
         <h:commandButton class="btn btn-primary"  onClick="location.reload();" value="Filtrar por preferencia de usuario" action="#{bEstado.setEstado(2)}"/>
      	<br></br>
      	<br></br>
      	<h:commandButton class="btn btn-primary"  onClick="location.reload();" value="Ver todas las actividades" action="#{bEstado.setEstado(1)}"/>
     	<br></br>
     	<br></br>
     	<h:commandButton class="btn btn-primary"  onClick="location.reload();" value="Ver recomendadas" action="#{bEstado.setEstado(3)}"/>
      </h:form>
      </div>
    </div>
	<c:choose>
           
    <c:when test="#{bEstado.getEstado()==1}">
   			 <c:forEach items="#{bActividad.obtenerListaActividadesPorRol(controlAutorizacion.usuario)}" var="act" > 
			    <div class="col-lg-4 mb-4">
			        <div class="card h-100">
			          <h4 class="card-header">${act.nombre}</h4>
			          <div class="card-body">
			          	
			            <p class="card-text">
			            <b>Descripcion: </b> ${act.descripcion}<br></br>
			            <b>Lugar: </b>${act.lugar}<br></br>
			            <b>Estado: </b>${act.estado}<br></br>
                                    <b>Tipo de actividad: </b>${act.tipo_Actividad}<br/>
			            <b>Fecha inicio: </b>${act.fecha_inicio}<br></br>
			            <b>Fecha fin: </b>${act.fecha_fin}<br></br>
			            <b>ONG: </b>${act.ONG.nombre}
                                    <br/>
                                    <br/>
                                     <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
                                    <h:form>
			            <h:commandButton class="btn btn-primary" value="Inscribirse en actividad" action="#{bActividad.procesarInscripcion(act.identificador)}"/>
                                    </h:form>
                                        </c:when>
                                     </c:choose>
                                    
			            </p>
			          </div>
			          <h:form>
			        <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
			          <div class="card-footer" align="center">
			         	
			         </div>
			         </c:when>
			         </c:choose>
			          </h:form>
			         
			        </div>
			      </div>
      
    </c:forEach>
   
   </c:when>
   
  <c:when test="#{bEstado.getEstado()==2}">
         <c:forEach items="#{bActividad.obtenerListaActividadesPorPreferencia(controlAutorizacion.usuario)}" var="act" > 
			    <div class="col-lg-4 mb-4">
			        <div class="card h-100">
			          <h4 class="card-header">${act.nombre}</h4>
			          <div class="card-body">
			          	
			            <p class="card-text">
			            <b>Descripcion: </b> ${act.descripcion}<br></br>
			            <b>Lugar: </b>${act.lugar}<br></br>
			            <b>Estado: </b>${act.estado}<br></br>
                                    <b>Tipo de actividad: </b>${act.tipo_Actividad}<br/>
			            <b>Fecha inicio: </b>${act.fecha_inicio}<br></br>
			            <b>Fecha fin: </b>${act.fecha_fin}<br></br>
			            <b>ONG: </b>${act.ONG.nombre}
                                    <br/>
                                    <br/>
                                    <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
                                    <h:form>
			            <h:commandButton class="btn btn-primary" value="Inscribirse en actividad" action="#{bActividad.procesarInscripcion(act.identificador)}"/>
                                    </h:form>
                                        </c:when>
                                     </c:choose>
			            </p>
			          </div>
			        <h:form>
			        <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
			          <div class="card-footer" align="center">
			         
			         </div>
			         </c:when>
			         </c:choose>
			          </h:form>
			        </div>
			      </div>
      
    </c:forEach> 	
       
       
       
       
    </c:when>   
      <c:when test="#{bEstado.getEstado()==3}">
         <c:forEach items="#{bActividad.obtenerActividadRecomendadas(controlAutorizacion.usuario)}" var="act" > 
			    <div class="col-lg-4 mb-4">
			        <div class="card h-100">
			          <h4 class="card-header">${act.nombre}</h4>
			          <div class="card-body">
			          	
			            <p class="card-text">
			            <b>Descripcion: </b> ${act.descripcion}<br></br>
			            <b>Lugar: </b>${act.lugar}<br></br>
			            <b>Estado: </b>${act.estado}<br></br>
                                    <b>Tipo de actividad: </b>${act.tipo_Actividad}<br/>
			            <b>Fecha inicio: </b>${act.fecha_inicio}<br></br>
			            <b>Fecha fin: </b>${act.fecha_fin}<br></br>
			            <b>ONG: </b>${act.ONG.nombre}
			            <br/>
                                    <br/>
                                   <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
                                    <h:form>
			            <h:commandButton class="btn btn-primary" value="Inscribirse en actividad" action="#{bActividad.procesarInscripcion(act.identificador)}"/>
                                    </h:form>
                                        </c:when>
                                     </c:choose>
			            </p>
			          </div>
			       <h:form>
			        <c:choose>
			        	<c:when test="#{act.estado.equals('En proceso de inscripcion')}">
			          <div class="card-footer" align="center">
                                   
                                   		         
			         </div>
			         </c:when>
			         </c:choose>
			          </h:form>
			        </div>
			      </div>
      
    </c:forEach> 	
       
       
       
       
    </c:when>
     </c:choose>
              
    </div>
  

  </div>
  </c:when>
 
 <h:messages style="color: #9b2e23 "/>
  <c:otherwise>
   <ui:include src="errorAutorizacion.xhtml"/>	<!-- Modificar mas adelante -->
  </c:otherwise>
  </c:choose>
	</ui:define>
	
</ui:composition> 
 


</html>